<% if current_user %>

<% if params[:user].blank? && params[:gender].blank? %>
<div class="panel radius">
  <h4>Let your friends know that you are using Dancer City so that they can use it too.</h4>

  <p>We invite to post the following message in your Facebook wall through Dancer City</p>

  <%= form_tag fb_notifications_wall_path, method: :get do %>
    <fieldset>
      <legend>Message</legend>
      <%= text_area_tag :fb_post, @fb_post, rows: 15, cols: 10, class: 'radius' %>
      <%= submit_tag 'Post in my Facebook wall', name: nil, class: 'tiny button radius' %>
    </fieldset>
  <% end %>
</div>
<% end %>
<% end %>

<h4>Dancers search engine</h4>
  <%= form_tag users_path, method: :get do %>
    <div class="row collapse">
      <div class="small-3 columns">
        <%= label_tag :gender, 'Find out a', class: 'right inline' %>
      </div>
      <div class="small-3 columns">
        <%= select_tag :gender, options_for_select([['woman', 'female'], ['man', 'male']],'female') %>
      </div>
      <div class="small-6 columns">
        <%= label_tag :dances, 'that likes to dance:', class: 'left inline' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <input name="user[dances][]" type="hidden" value="">
        <%= check_box_tag 'user[dances][]', 'Bachata', false, id: 'bachata', class: 'no-show' %>
        <%= label_tag :bachata, 'Bachata', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Cha-cha-ch치', false, id: 'chachacha', class: 'no-show' %>
        <%= label_tag :chachacha, 'ChaChaCh치', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Conga', false, id: 'conga', class: 'no-show' %>
        <%= label_tag :conga, 'Conga', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Cumbia', false, id: 'cumbia', class: 'no-show' %>
        <%= label_tag :cumbia, 'Cumbia', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Danz칩n', false, id: 'danzon', class: 'no-show' %>
        <%= label_tag :danzon, 'Danz칩n', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Fox-Trot', false, id: 'foxtrot', class: 'no-show' %>
        <%= label_tag :foxtrot, 'Fox-Trot', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Jazz', false, id: 'jazz', class: 'no-show' %>
        <%= label_tag :jazz, 'Jazz', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Kizomba', false, id: 'kizomba', class: 'no-show' %>
        <%= label_tag :kizomba, 'Kizomba', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Merengue', false, id: 'merengue', class: 'no-show' %>
        <%= label_tag :merengue, 'Merengue', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Pasodoble', false, id: 'pasodoble', class: 'no-show' %>
        <%= label_tag :pasodoble, 'Pasodoble', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Rock and roll', false, id: 'rockandroll', class: 'no-show' %>
        <%= label_tag :rockandroll, 'RockAndRoll', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Rumba', false, id: 'rumba', class: 'no-show' %>
        <%= label_tag :rumba, 'Rumba', class: 'checkbox' %>
      </div>
    </div>
  
    <div class="row">
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Salsa', false, id: 'salsa', class: 'no-show' %>
        <%= label_tag :salsa, 'Salsa', class: 'checkbox' %>
      </div>
      <div class="small-6 columns">
        <%= check_box_tag 'user[dances][]', 'Swing', false, id: 'swing', class: 'no-show' %>
        <%= label_tag :swing, 'Swing', class: 'checkbox' %>
      </div>
    </div>

    <div class="row">
      <div class="small-12 columns">
        <%= check_box_tag 'user[dances][]', 'Tango', false, id: 'tango', class: 'no-show' %>
        <%= label_tag :tango, 'Tango', class: 'checkbox' %>
      </div>
    </div>

    <br><%= submit_tag 'Search', name: nil, class: 'tiny button radius' %>
  <% end %>

  <% if @users %>
    <% if @users.empty? %>
      <p><strong>There is not any person that match your search criteria at this time. Please try again later.</strong></p>
    <% else %>
      <p><strong>The following persons match your search criteria:</strong></p>
      <div id="users">
        <%= render partial: 'user', collection: @users, locals: { has_pending_invitations: false } %>
      </div>
      <%= will_paginate @users %>
    <% end %>
  <% end %>
